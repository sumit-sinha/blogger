!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,o=n.defn,a=r.length,s=new Array(a),d=0;d<a;++d)s[d]=i(r[d]);var l=o.apply(null,s);if(void 0===l)throw"module ["+t+"] returned undefined";n.instance=l},n=function(t,n,i){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===i)throw"no definition function for "+t;e[t]={deps:n,defn:i,instance:void 0}},i=function(n){var i=e[n];if(void 0===i)throw"module ["+n+"] was undefined";return void 0===i.instance&&t(n),i.instance},r=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;++o)r.push(i(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:n,require:r,demand:i}}};var o=n,a=function(e,t){o(e,[],function(){return t})};a("1",tinymce.PluginManager),a("2",tinymce.util.Tools),a("3",tinymce.util.VK),o("4",[],function(){var e=function(e){return e&&"BR"===e.nodeName};return{isTextNode:function(e){return e&&3===e.nodeType},isListNode:function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},isListItemNode:function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},isBr:e,isFirstChild:function(e){return e.parentNode.firstChild===e},isLastChild:function(e){return e.parentNode.lastChild===e},isTextBlock:function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},isBogusBr:function(t,n){return!!e(n)&&!(!t.isBlock(n.nextSibling)||e(n.previousSibling))},isEmpty:function(e,t,n){var i=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&i},isChildOfBody:function(e,t){return e.isChildOf(t,e.getRoot())}}}),a("9",tinymce.dom.TreeWalker),a("a",tinymce.dom.RangeUtils),o("b",["2","4"],function(e,t){return{getSelectedListItems:function(n){return e.grep(n.selection.getSelectedBlocks(),function(e){return t.isListItemNode(e)})}}}),a("h",tinymce.dom.DOMUtils.DOM),o("d",["a","4"],function(e,t){var n=function(n,i){var r=e.getNode(n,i);return t.isListItemNode(n)&&t.isTextNode(r)?{container:r,offset:i>=n.childNodes.length?r.data.length:0}:{container:n,offset:i}};return{getNormalizedEndPoint:n,normalizeRange:function(e){var t=e.cloneRange(),i=n(e.startContainer,e.startOffset);t.setStart(i.container,i.offset);var r=n(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t}}}),o("c",["h","4","d"],function(e,t,n){var i=function(t){var n={},i=function(i){var r,o,a;o=t[i?"startContainer":"endContainer"],a=t[i?"startOffset":"endOffset"],1===o.nodeType&&(r=e.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(a=Math.min(a,o.childNodes.length-1),i?o.insertBefore(r,o.childNodes[a]):e.insertAfter(r,o.childNodes[a])):o.appendChild(r),o=r,a=0),n[i?"startContainer":"endContainer"]=o,n[i?"startOffset":"endOffset"]=a};return i(!0),t.collapsed||i(),n},r=function(t){function i(n){var i,r,o;i=o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],i&&(1===i.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(i),i=i.parentNode,e.remove(o)),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=r)}i(!0),i();var r=e.createRng();return r.setStart(t.startContainer,t.startOffset),t.endContainer&&r.setEnd(t.endContainer,t.endOffset),n.normalizeRange(r)};return{createBookmark:i,resolveBookmark:r}}),o("e",["h","2","4"],function(e,t,n){var i=function(t,i){var r,o=i.parentNode;"LI"===o.nodeName&&o.firstChild===i&&(r=o.previousSibling,r&&"LI"===r.nodeName?(r.appendChild(i),n.isEmpty(t,o)&&e.remove(o)):e.setStyle(o,"listStyleType","none")),n.isListNode(o)&&(r=o.previousSibling)&&"LI"===r.nodeName&&r.appendChild(i)};return{normalizeList:i,normalizeLists:function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){i(e,t)})}}}),a("f",tinymce.dom.BookmarkManager),a("j",tinymce.Env),o("i",["h","j"],function(e,t){return{createNewTextBlock:function(n,i,r){var o,a,s,d=e.createFragment(),l=n.schema.getBlockElements();if(n.settings.forced_root_block&&(r=r||n.settings.forced_root_block),r&&((a=e.create(r)).tagName===n.settings.forced_root_block&&e.setAttribs(a,n.settings.forced_root_block_attrs),d.appendChild(a)),i)for(;o=i.firstChild;){var c=o.nodeName;s||"SPAN"===c&&"bookmark"===o.getAttribute("data-mce-type")||(s=!0),l[c]?(d.appendChild(o),a=null):r?(a||(a=e.create(r),d.appendChild(a)),a.appendChild(o)):d.appendChild(o)}return n.settings.forced_root_block?s||t.ie&&!(t.ie>10)||a.appendChild(e.create("br",{"data-mce-bogus":"1"})):d.appendChild(e.create("br")),d}}}),o("g",["h","2","i","4"],function(e,t,n,i){return{splitList:function(r,o,a,s){var d,l,c,f;for(c=e.select('span[data-mce-type="bookmark"]',o),s=s||n.createNewTextBlock(r,a),(d=e.createRng()).setStartAfter(a),d.setEndAfter(o),f=(l=d.extractContents()).firstChild;f;f=f.firstChild)if("LI"===f.nodeName&&r.dom.isEmpty(f)){e.remove(f);break}r.dom.isEmpty(l)||e.insertAfter(l,o),e.insertAfter(s,o),i.isEmpty(r.dom,a.parentNode)&&function(n){t.each(c,function(e){n.parentNode.insertBefore(e,a.parentNode)}),e.remove(n)}(a.parentNode),e.remove(a),i.isEmpty(r.dom,o)&&e.remove(o)}}}),o("7",["h","4","c","b","g","e","i"],function(e,t,n,i,r,o,a){var s=function(n,i){t.isEmpty(n,i)&&e.remove(i)},d=function(n,i){var d,l=i.parentNode,c=l.parentNode;return!(l!==n.getBody()&&("DD"===i.nodeName?(e.rename(i,"DT"),0):t.isFirstChild(i)&&t.isLastChild(i)?("LI"===c.nodeName?(e.insertAfter(i,c),s(n.dom,c),e.remove(l)):t.isListNode(c)?e.remove(l,!0):(c.insertBefore(a.createNewTextBlock(n,i),l),e.remove(l)),0):t.isFirstChild(i)?("LI"===c.nodeName?(e.insertAfter(i,c),i.appendChild(l),s(n.dom,c)):t.isListNode(c)?c.insertBefore(i,l):(c.insertBefore(a.createNewTextBlock(n,i),l),e.remove(i)),0):t.isLastChild(i)?("LI"===c.nodeName?e.insertAfter(i,c):t.isListNode(c)?e.insertAfter(i,l):(e.insertAfter(a.createNewTextBlock(n,i),l),e.remove(i)),0):("LI"===c.nodeName?(l=c,d=a.createNewTextBlock(n,i,"LI")):d=t.isListNode(c)?a.createNewTextBlock(n,i,"LI"):a.createNewTextBlock(n,i),r.splitList(n,l,i,d),o.normalizeLists(n.dom,l.parentNode),0)))};return{outdent:d,outdentSelection:function(e){var t=i.getSelectedListItems(e);if(t.length){var r,o,a=n.createBookmark(e.selection.getRng(!0)),s=e.getBody();for(r=t.length;r--;)for(var l=t[r].parentNode;l&&l!==s;){for(o=t.length;o--;)if(t[o]===l){t.splice(r,1);break}l=l.parentNode}for(r=0;r<t.length&&(d(e,t[r])||0!==r);r++);return e.selection.setRng(n.resolveBookmark(a)),e.nodeChanged(),!0}}}}),o("8",["2","f","b","4","c","g","e","7"],function(e,t,n,i,r,o,a,s){var d=function(e,t,n){var i=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",i)},l=function(t,n){e.each(n,function(e,n){t.setAttribute(n,e)})},c=function(t,n,i){l(n,i["list-attributes"]),e.each(t.select("li",n),function(e){l(e,i["list-item-attributes"])})},f=function(e,t,n){d(e,t,n),c(e,t,n)},u=function(e,t,n){var r,o,a=e.getBody();for(r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===r.nodeType&&(r=r.childNodes[Math.min(o,r.childNodes.length-1)]||r);r.parentNode!==a;){if(i.isTextBlock(e,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},m=function(n,r){for(var o,a=[],s=n.getBody(),d=n.dom,l=u(n,r,!0),c=u(n,r,!1),f=[],m=l;m&&(f.push(m),m!==c);m=m.nextSibling);return e.each(f,function(e){if(i.isTextBlock(n,e))return a.push(e),void(o=null);if(d.isBlock(e)||i.isBr(e))return i.isBr(e)&&d.remove(e),void(o=null);var r=e.nextSibling;return t.isBookmarkNode(e)&&(i.isTextBlock(n,r)||!r&&e.parentNode===s)?void(o=null):(o||(o=d.create("p"),e.parentNode.insertBefore(o,e),a.push(o)),void o.appendChild(e))}),a},p=function(t,n,o){var a,s=t.selection.getRng(!0),d="LI",l=t.dom;o=o||{},"false"!==l.getContentEditable(t.selection.getNode())&&("DL"===(n=n.toUpperCase())&&(d="DT"),a=r.createBookmark(s),e.each(m(t,s),function(e){var r,a;(a=e.previousSibling)&&i.isListNode(a)&&a.nodeName===n&&function(e){var t=l.getStyle(e,"list-style-type"),n=o?o["list-style-type"]:"";return n=null===n?"":n,t===n}(a)?(r=a,e=l.rename(e,d),a.appendChild(e)):(r=l.create(n),e.parentNode.insertBefore(r,e),r.appendChild(e),e=l.rename(e,d)),f(l,r,o),C(t.dom,r)}),t.selection.setRng(r.resolveBookmark(a)))},g=function(t){var d=r.createBookmark(t.selection.getRng(!0)),l=t.getBody(),c=n.getSelectedListItems(t),f=e.grep(c,function(e){return t.dom.isEmpty(e)});c=e.grep(c,function(e){return!t.dom.isEmpty(e)}),e.each(f,function(e){i.isEmpty(t.dom,e)&&s.outdent(t,e)}),e.each(c,function(e){var n,r;if(e.parentNode!==t.getBody()){for(n=e;n&&n!==l;n=n.parentNode)i.isListNode(n)&&(r=n);o.splitList(t,r,e),a.normalizeLists(t.dom,r.parentNode)}}),t.selection.setRng(r.resolveBookmark(d))},h=function(e,t){return e&&t&&i.isListNode(e)&&e.nodeName===t.nodeName},v=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},N=function(e,t){return e.className===t.className},y=function(e,t,n){return h(t,n)&&v(e,t,n)&&N(t,n)},C=function(e,t){var n,i;if(n=t.nextSibling,y(e,t,n)){for(;i=n.firstChild;)t.appendChild(i);e.remove(n)}if(n=t.previousSibling,y(e,t,n)){for(;i=n.lastChild;)t.insertBefore(i,t.firstChild);e.remove(n)}};return{toggleList:function(e,t,n){var i=e.dom.getParent(e.selection.getStart(),"OL,UL,DL");if(n=n||{},i!==e.getBody())if(i)if(i.nodeName===t)g(e);else{var o=r.createBookmark(e.selection.getRng(!0));f(e.dom,i,n),C(e.dom,e.dom.rename(i,t)),e.selection.setRng(r.resolveBookmark(o))}else p(e,t,n)},removeList:g,mergeWithAdjacentLists:C}}),o("5",["9","a","3","b","4","c","d","e","8"],function(e,t,n,i,r,o,a,s,d){var l=function(n,i,o){var a,s,d=i.startContainer,l=i.startOffset;if(3===d.nodeType&&(o?l<d.data.length:l>0))return d;for(a=n.schema.getNonEmptyElements(),1===d.nodeType&&(d=t.getNode(d,l)),s=new e(d,n.getBody()),o&&r.isBogusBr(n.dom,d)&&s.next();d=s[o?"next":"prev2"]();){if("LI"===d.nodeName&&!d.hasChildNodes())return d;if(a[d.nodeName])return d;if(3===d.nodeType&&d.data.length>0)return d}},c=function(e,t,n){var i,o,a=t.parentNode;if(r.isChildOfBody(e,t)&&r.isChildOfBody(e,n)){if(r.isListNode(n.lastChild)&&(o=n.lastChild),a===n.lastChild&&r.isBr(a.previousSibling)&&e.remove(a.previousSibling),(i=n.lastChild)&&r.isBr(i)&&t.hasChildNodes()&&e.remove(i),r.isEmpty(e,n,!0)&&e.$(n).empty(),!r.isEmpty(e,t,!0))for(;i=t.firstChild;)n.appendChild(i);o&&n.appendChild(o),e.remove(t),r.isEmpty(e,a)&&a!==e.getRoot()&&e.remove(a)}},f=function(e,t){var n,i,s,f=e.dom,u=e.selection,m=f.getParent(u.getStart(),"LI");if(m){if((n=m.parentNode)===e.getBody()&&r.isEmpty(f,n))return!0;if(i=a.normalizeRange(u.getRng(!0)),(s=f.getParent(l(e,i,t),"LI"))&&s!==m){var p=o.createBookmark(i);return t?c(f,s,m):c(f,m,s),e.selection.setRng(o.resolveBookmark(p)),!0}if(!s&&!t&&d.removeList(e,n.nodeName))return!0}return!1},u=function(e,t){var n=e.dom,i=n.getParent(e.selection.getStart(),n.isBlock);if(i&&n.isEmpty(i)){var r=a.normalizeRange(e.selection.getRng(!0)),o=n.getParent(l(e,r,t),"LI");if(o)return e.undoManager.transact(function(){n.remove(i),d.mergeWithAdjacentLists(n,o.parentNode),e.selection.select(o,!0),e.selection.collapse(t)}),!0}return!1},m=function(e,t){return f(e,t)||u(e,t)},p=function(e){return!!(e.dom.getParent(e.selection.getStart(),"LI,DT,DD")||i.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),s.normalizeLists(e.dom,e.getBody())}),!0)},g=function(e,t){return e.selection.isCollapsed()?m(e,t):p(e)};return{setup:function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?g(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&g(e,!0)&&t.preventDefault()})},backspaceDelete:g}}),o("6",["h","4","c","b"],function(e,t,n,i){var r=function(n,i){var r;if(t.isListNode(n)){for(;r=n.firstChild;)i.appendChild(r);e.remove(n)}},o=function(n){var i,o,a;return"DT"===n.nodeName?(e.rename(n,"DD"),!0):(i=n.previousSibling,i&&t.isListNode(i)?(i.appendChild(n),!0):i&&"LI"===i.nodeName&&t.isListNode(i.lastChild)?(i.lastChild.appendChild(n),r(n.lastChild,i.lastChild),!0):(i=n.nextSibling,i&&t.isListNode(i)?(i.insertBefore(n,i.firstChild),!0):!(!(i=n.previousSibling)||"LI"!==i.nodeName||(o=e.create(n.parentNode.nodeName),(a=e.getStyle(n.parentNode,"listStyleType"))&&e.setStyle(o,"listStyleType",a),i.appendChild(o),o.appendChild(n),r(n.lastChild,o),0))))};return{indentSelection:function(e){var t=i.getSelectedListItems(e);if(t.length){for(var r=n.createBookmark(e.selection.getRng(!0)),a=0;a<t.length&&(o(t[a])||0!==a);a++);return e.selection.setRng(n.resolveBookmark(r)),e.nodeChanged(),!0}}}}),o("0",["1","2","3","4","5","6","7","8"],function(e,t,n,i,r,o,a,s){var d=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},l=function(e){e.on("BeforeExecCommand",function(t){var n,i=t.command.toLowerCase();if("indent"===i?o.indentSelection(e)&&(n=!0):"outdent"===i&&a.outdentSelection(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){s.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){s.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){s.toggleList(e,"DL",n)})},c=function(e){e.addQueryStateHandler("InsertUnorderedList",d(e,"UL")),e.addQueryStateHandler("InsertOrderedList",d(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",d(e,"DL"))},f=function(e){e.on("keydown",function(t){9!==t.keyCode||n.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?a.outdentSelection(e):o.indentSelection(e))})},u=function(e){var n=function(n){return function(){var r=this;e.on("NodeChange",function(e){var o=t.grep(e.parents,i.isListNode);r.active(o.length>0&&o[0].nodeName===n)})}};(function(e,n){var i=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(i.split(/[ ,]/),n)})(e,"advlist")||(e.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:n("OL")}),e.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:n("UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){var n=t.control;e.on("nodechange",function(){for(var t=e.selection.getSelectedBlocks(),r=!1,o=0,a=t.length;!r&&o<a;o++){var s=t[o].nodeName;r="LI"===s&&i.isFirstChild(t[o])||"UL"===s||"OL"===s||"DD"===s}n.disabled(r)})}})};return e.add("lists",function(e){return u(e),r.setup(e),e.on("init",function(){l(e),c(e),f(e)}),{backspaceDelete:function(t){r.backspaceDelete(e,t)}}}),function(){}}),i("0")()}();